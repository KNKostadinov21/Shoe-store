{% extends "base.html" %}
{% block title %}Каталог{% endblock %}

{% block content %}
<h2>Каталог</h2>

<form method="get" action="{{ url_for('catalog.catalog_list') }}" style="margin-bottom: 20px;">
    <input type="text" name="q" placeholder="Търси по име..." value="{{ query }}">

    <label for="category">Категория:</label>
    <select name="category">
        <option value="">Всички</option>
        <option value="sport" {% if category == "sport" %}selected{% endif %}>Спортни</option>
        <option value="official" {% if category == "official" %}selected{% endif %}>Официални</option>
        <option value="everyday" {% if category == "everyday" %}selected{% endif %}>Ежедневни</option>
    </select>

    <label for="min_price">Мин. цена:</label>
    <input type="number" step="0.01" name="min_price" value="{{ min_price if min_price is not none else '' }}">

    <label for="max_price">Макс. цена:</label>
    <input type="number" step="0.01" name="max_price" value="{{ max_price if max_price is not none else '' }}">

    <button type="submit">Филтрирай</button>
</form>

<ul style="list-style: none; padding: 0;">
    {% for shoe in shoes %}
    <li style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 8px; background: #fff; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <span><strong>{{ shoe.name }}</strong> – ${{ shoe.price }} ({{ shoe.category }})</span>
        <form method="post" action="{{ url_for('cart.add_to_cart', shoe_id=shoe.id) }}">
            <button type="submit">Добави в количката</button>
        </form>
    <a href="{{ url_for('comment.add_comment') }}"><button>Добави коментар</button></a>
    {% endfor %}
</ul>

<br>
<a href="{{ url_for('order.create_order') }}">
    <button>Направи поръчка</button>
</a>
{% endblock %}