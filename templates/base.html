<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}–ú–∞–≥–∞–∑–∏–Ω –∑–∞ –æ–±—É–≤–∫–∏{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        .notification-bell {
            position: relative;
            display: inline-block;
            margin-left: 15px;
            cursor: pointer;
        }
        .notification-count {
            position: absolute;
            top: -8px;
            right: -10px;
            background: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.8rem;
        }

        nav {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        nav a, nav span {
            color: white;
            text-decoration: none;
            margin: 0 6px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–∞ –∑–∞ –æ–±—É–≤–∫–∏!</h1>
        <nav>
            <a href="{{ url_for('index') }}">–ù–∞—á–∞–ª–æ</a>
            <a href="{{ url_for('catalog.catalog_list') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a href="{{ url_for('cart.view_cart') }}">–ö–æ–ª–∏—á–∫–∞</a>

            <div class="notification-bell">
                <a href="{{ url_for('notifications.view_notifications') }}">üîî</a>
                {% if notification_count > 0 %}
                    <span class="notification-count">{{ notification_count }}</span>
                {% endif %}
            </div>

            {% if session.get('username') %}
                <span>–ó–¥—Ä–∞–≤–µ–π, {{ session.get('username') }}</span>
                {% if session.get('role') == 'admin' %}
                    <a href="{{ url_for('admin.manage_shoes') }}">–ê–¥–º–∏–Ω</a>
                {% endif %}
                <a href="{{ url_for('auth.logout') }}">–ò–∑–ª–µ–∑ –æ—Ç –ø—Ä–æ—Ñ–∏–ª–∞</a>
            {% else %}
                <a href="{{ url_for('auth.login') }}">–í—Ö–æ–¥</a>
                <a href="{{ url_for('auth.register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            {% endif %}
        </nav>
    </header>

    <main>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul>
                {% for category, msg in messages %}
                    <li><strong>{{ category|capitalize }}:</strong> {{ msg }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>
</body>
</html>
